{"version":3,"file":"SubmitView.7f72738f.js","sources":["../../src/components/SubmitFrom.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { type Ref, ref } from \"vue\";\r\nimport dayjs from \"dayjs\";\r\nimport router from \"@/router\";\r\n\r\n\r\ntype citysT = Record<string, string[]>;\r\n\r\nconst userTypes = [\"醫療人員\", \"老師\", \"社政人員\", \"家長\", \"其他\"];\r\nconst parentNationalitys = [\"本國籍\",\"大陸\",\"泰國\",\"印尼\",\"越南\",\"柬埔寨\",\"緬甸\",\"其他\",];\r\nconst childGenders = [\"男\", \"女\"];\r\n\r\n\r\nconst citys: Ref<citysT> = ref({});\r\n\r\nconst isLoading = ref(false);\r\n\r\nfunction getFormValues(submitEvent: Event) {\r\n  \r\n  submitEvent.preventDefault();\r\n  const formData = new FormData(submitEvent.target as HTMLFormElement);\r\n\r\n  let data: Record<string, string> = {};\r\n  formData.forEach((v, k, a) => (data[k] = v.toString()));\r\n  console.log(data);\r\n  isLoading.value = true;\r\n  sendFormDate(data);\r\n}\r\nfunction sendFormDate(date: Record<string, string>) {\r\n\r\n  const myHeaders = new Headers();\r\n  myHeaders.append(\"X-Parse-Application-Id\", \"kYUbkvUsiOYbHlfGTekGVCsdoLgHXglAcQbaO57f\");\r\n  myHeaders.append(\"X-Parse-REST-API-Key\", \"HBi7YTskQm6k7AcUFIN3Rp5sH2FMKvHbRyfEyr4Q\");\r\n  myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n  const raw = JSON.stringify(date);\r\n\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: myHeaders,\r\n    body: raw\r\n  };\r\n  \r\n  const city = date['city'];\r\n  const district = date['district'];\r\n  const urlParams = \"city=\" + city + \"&district=\" + district\r\n\r\n  fetch(\"https://kds.b4a.io/classes/UserFrom\", requestOptions)\r\n    .then(response => response.text())\r\n    .then(result => {console.log(result); router.push(\"/map?\" + urlParams); })\r\n    .catch(error => console.log('error', error));\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n  <form id=\"from\" @submit.prevent=\"getFormValues\">\r\n    <div class=\"form-row\">\r\n      <div class=\"col-md-12\">\r\n        填表人姓名：\r\n        <input type=\"text\" class=\"form-control\" name=\"userName\" required />\r\n      </div>\r\n      <div class=\"col-md-12\">\r\n        填表人身分：\r\n        <div class=\"form-check-inline\" v-for=\"(v, i) in userTypes\">\r\n          <input\r\n            class=\"form-check-input\"\r\n            type=\"radio\"\r\n            name=\"userType\"\r\n            :id=\"'userType_' + i\"\r\n            :value=\"v\"\r\n            required\r\n          />\r\n          <label class=\"form-check-label\" :for=\"'userType_' + i\">{{ v }}</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-12\">\r\n        家長國籍：\r\n        <div class=\"form-check-inline\" v-for=\"(v, i) in parentNationalitys\">\r\n          <input\r\n            class=\"form-check-input\"\r\n            type=\"radio\"\r\n            name=\"parentNationality\"\r\n            :id=\"'parentNationality_' + i\"\r\n            :value=\"v\"\r\n            required\r\n          />\r\n          <label class=\"form-check-label\" :for=\"'parentNationality_' + i\">{{\r\n            v\r\n          }}</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <br />\r\n    <h3>兒童基本資料</h3>\r\n    <div class=\"form-row\">\r\n      <div class=\"col-md-12\">\r\n        兒童姓名：\r\n        <input type=\"text\" class=\"form-control\" name=\"childName\" required />\r\n        <label>性別：</label>\r\n        <div class=\"form-check-inline\"\r\n          v-for=\"childGender in childGenders\">\r\n          <input\r\n            class=\"form-check-input\"\r\n            type=\"radio\"\r\n            name=\"childGender\"\r\n            :id=\"childGender\"\r\n            :value=\"childGender\" required\r\n          />\r\n          <label class=\"form-check-label\" :for=\"childGender\">{{ childGender }}</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <br />\r\n    <div class=\"form-row\">\r\n      <div class=\"col-sm-6\">\r\n        身分證資料：\r\n        <input\r\n          class=\"form-control\"\r\n          name=\"identityCard\"\r\n          required\r\n          pattern=\"[A-Z][01][0-9]{8}\"\r\n        />\r\n      </div>\r\n      <div class=\"col-sm-6\">\r\n        電話：\r\n        <input class=\"form-control\" name=\"phoneNumber\" required />\r\n      </div>\r\n    </div>\r\n\r\n\r\n      <button class=\"btn btn-primary\" type=\"submit\" :disabled=\"isLoading\">\r\n      確認\r\n      <span class=\"spinner-border spinner-border-sm\" v-if=\"isLoading\"></span>\r\n    </button>\r\n\r\n\r\n  </form>\r\n</template>\r\n"],"names":[],"mappings":"83CAQA,KAAM,GAAY,CAAC,2BAAQ,eAAM,2BAAQ,eAAM,cAAI,EAC7C,EAAqB,CAAC,qBAAM,eAAK,eAAK,eAAK,eAAK,qBAAM,eAAK,cAAK,EAChE,EAAe,CAAC,SAAK,QAAG,EAGH,EAAI,CAAA,CAAE,EAE3B,KAAA,GAAY,EAAI,EAAK,EAE3B,WAAuB,EAAoB,CAEzC,EAAY,eAAe,EAC3B,KAAM,GAAW,GAAI,UAAS,EAAY,MAAyB,EAEnE,GAAI,GAA+B,CAAA,EAC1B,EAAA,QAAQ,CAAC,EAAG,EAAG,IAAO,EAAK,GAAK,EAAE,SAAW,CAAA,EACtD,QAAQ,IAAI,CAAI,EAChB,EAAU,MAAQ,GAClB,EAAa,CAAI,CACnB,CACA,WAAsB,EAA8B,CAE5C,KAAA,GAAY,GAAI,SACZ,EAAA,OAAO,yBAA0B,0CAA0C,EAC3E,EAAA,OAAO,uBAAwB,0CAA0C,EACzE,EAAA,OAAO,eAAgB,kBAAkB,EAE7C,KAAA,GAAM,KAAK,UAAU,CAAI,EAEzB,EAAiB,CACrB,OAAQ,OACR,QAAS,EACT,KAAM,CAAA,EAGF,EAAO,EAAK,KACZ,EAAW,EAAK,SAChB,EAAY,QAAU,EAAO,aAAe,EAE5C,MAAA,sCAAuC,CAAc,EACxD,KAAK,AAAA,GAAY,EAAS,KAAM,CAAA,EAChC,KAAK,AAAU,GAAA,CAAC,QAAQ,IAAI,CAAM,EAAU,EAAA,KAAK,QAAU,CAAS,CAAA,CAAI,EACxE,MAAM,AAAA,GAAS,QAAQ,IAAI,QAAS,CAAK,CAAC,CAE/C"}