{"version":3,"file":"UserView.876d1695.js","sources":["../../src/components/UserFrom.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { type Ref, ref } from \"vue\";\r\nimport dayjs from \"dayjs\";\r\nimport router from \"@/router\";\r\n\r\n\r\ntype citysT = Record<string, string[]>;\r\n\r\nconst userTypes = [\"父母/監護人\", \"老師\", \"社工\", \"護理師\", \"其他\"];\r\nconst specialDiseaseList = [\r\n  \"神經系統\",\r\n  \"內分泌\",\r\n  \"罕見疾病\",\r\n  \"早產\"\r\n];\r\nconst retardedList = [\"動作類\", \"語言\", \"認知、社會情緒、專注力、過動等\"]\r\n\r\n\r\n\r\nconst userRelationship = ref(\"\");\r\nconst isEvaluate = ref(null);\r\nconst isSpecialDisease = ref(null);\r\n\r\n\r\nconst citys: Ref<citysT> = ref({});\r\n\r\nfetch(\"administrativeArea.json\")\r\n  .then((value) => value.json())\r\n  .then((value) => {\r\n    citys.value = value;\r\n  });\r\n\r\n\r\nconst isLoading = ref(false);\r\n\r\nfunction submitForm(submitEvent: Event) {\r\n\r\n  submitEvent.preventDefault();\r\n  const formData = new FormData(submitEvent.target as HTMLFormElement);\r\n\r\n  let data: Record<string, any> = {};\r\n  formData.forEach((v, k, a) => {\r\n    if (k in data) {\r\n      data[k] = data[k] + ',' + v.toString()\r\n    } else {\r\n      data[k] = v.toString()\r\n    }\r\n    \r\n  \r\n  });\r\n  console.log(data);\r\n  isLoading.value = true;\r\n  //sendFormDate(data);\r\n}\r\nfunction sendFormDate(date: Record<string, string>) {\r\n\r\n  const myHeaders = new Headers();\r\n  myHeaders.append(\"X-Parse-Application-Id\", \"kYUbkvUsiOYbHlfGTekGVCsdoLgHXglAcQbaO57f\");\r\n  myHeaders.append(\"X-Parse-REST-API-Key\", \"HBi7YTskQm6k7AcUFIN3Rp5sH2FMKvHbRyfEyr4Q\");\r\n  myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n  const raw = JSON.stringify(date);\r\n\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: myHeaders,\r\n    body: raw\r\n  };\r\n\r\n  const city = date['city'];\r\n  const district = date['district'];\r\n  const urlParams = \"city=\" + city + \"&district=\" + district\r\n\r\n  fetch(\"https://kds.b4a.io/classes/UserFrom\", requestOptions)\r\n    .then(response => response.text())\r\n    .then(result => { console.log(result); router.push(\"/map?\" + urlParams); })\r\n    .catch(error => console.log('error', error));\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n  <form id=\"from\" @submit.prevent=\"submitForm\">\r\n    <div class=\"form-row\">\r\n      <h5>1.兒童基本資料</h5>\r\n      <div class=\"col-md-12\">\r\n        兒童身份證號：\r\n        <input type=\"text\" class=\"form-control\" name=\"identityNumber\" required pattern=\"[A-Z][01][0-9]{8}\" />\r\n        兒童姓名：\r\n        <input type=\"text\" class=\"form-control\" name=\"childName\" required />\r\n        兒童出生日期\r\n        <input type=\"date\" class=\"form-control\" name=\"childBirthday\" required />\r\n      </div>\r\n\r\n      <div class=\"col-md-12\">\r\n        填寫人與兒童關係：\r\n        <div class=\"form-inline\">\r\n          <div class=\"form-check-inline\" v-for=\"(v, i) in userTypes\">\r\n            <label class=\"form-check-label\">\r\n              <input class=\"form-check-input\" type=\"radio\" name=\"userRelationship\" :value=\"v\" v-model=\"userRelationship\"\r\n                required />{{ v }}\r\n            </label>\r\n          </div>\r\n\r\n          <div><input type=\"text\" class=\"form-control\" name=\"userRelationshipOther\"\r\n              :disabled=\"userRelationship != userTypes.at(userTypes.length - 1)\" /></div>\r\n        </div>\r\n      </div>\r\n      <button class=\"btn btn-primary\">\r\n        確認\r\n      </button>\r\n    </div>\r\n    <br>\r\n    <div>\r\n      <h5>2.是否曾經於本院/他院看過兒童發展聯合評估門診？</h5>\r\n      <div class=\"form-check\">\r\n        <label class=\"form-check-label\">\r\n          <input type=\"radio\" class=\"form-check-input\" name=\"isEvaluate\" :value=\"false\" v-model=\"isEvaluate\" required>否\r\n        </label>\r\n      </div>\r\n      <div class=\"form-check\">\r\n        <label class=\"form-check-label\">\r\n          <input type=\"radio\" class=\"form-check-input\" name=\"isEvaluate\" :value=\"true\" v-model=\"isEvaluate\" required>是\r\n        </label>\r\n        <div v-if=\"isEvaluate\">\r\n          <div class=\"form-inline\">\r\n            前次評估日期：<input type=\"date\" class=\"form-control\" name=\"lastEvaluate\" required />\r\n          </div>\r\n          <div class=\"form-inline\">\r\n            建議複評時間：<input type=\"date\" class=\"form-control\" name=\"SuggestEvaluate\" />（可不填）\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <br>\r\n    <div>\r\n      <h5>3、是否有特殊疾病？</h5>\r\n      <div class=\"form-check\">\r\n        <label class=\"form-check-label\">\r\n          <input type=\"radio\" class=\"form-check-input\" name=\"isSpecialDisease\" :value=\"false\" v-model=\"isSpecialDisease\"\r\n            required>否\r\n        </label>\r\n      </div>\r\n      <div class=\"form-check\">\r\n        <label class=\"form-check-label\">\r\n          <input type=\"radio\" class=\"form-check-input\" name=\"isSpecialDisease\" :value=\"true\" v-model=\"isSpecialDisease\"\r\n            required>是\r\n        </label>\r\n        <div v-show=\"isSpecialDisease\">\r\n          <div class=\"form-inline\" v-for=\"v, i in specialDiseaseList\">\r\n\r\n            <div class=\"form-check\">\r\n              <label class=\"form-check-label\">\r\n                <input type=\"checkbox\" class=\"form-check-input\" name=\"specialDisease\" :value=\"v\">{{ v }}\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <br />\r\n\r\n    <div>\r\n      <h5>4、前次評估遲緩/臨界遲緩：</h5>\r\n\r\n      <div class=\"form-inline\" v-for=\"v in retardedList\">\r\n        <div class=\"form-check\">\r\n          <label class=\"form-check-label\">\r\n            <input type=\"checkbox\" class=\"form-check-input\" name=\"retarded\" :value=\"v\">{{ v }}\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n    <div class=\"form-row\">\r\n\r\n    </div>\r\n\r\n    <button class=\"btn btn-primary\" type=\"submit\">提交</button>\r\n\r\n\r\n\r\n\r\n\r\n  </form>\r\n</template>\r\n"],"names":[],"mappings":"u0EAQA,KAAM,GAAY,CAAC,kCAAU,eAAM,eAAM,qBAAO,cAAI,EAC9C,EAAqB,CACzB,2BACA,qBACA,2BACA,cAAA,EAEI,EAAe,CAAC,qBAAO,eAAM,4FAAiB,EAI9C,EAAmB,EAAI,EAAE,EACzB,EAAa,EAAI,IAAI,EACrB,EAAmB,EAAI,IAAI,EAG3B,EAAqB,EAAI,CAAA,CAAE,EAE3B,MAAA,yBAAyB,EAC5B,KAAK,AAAC,GAAU,EAAM,MAAM,EAC5B,KAAK,AAAC,GAAU,CACf,EAAM,MAAQ,CAAA,CACf,EAGG,KAAA,GAAY,EAAI,EAAK,EAE3B,WAAoB,EAAoB,CAEtC,EAAY,eAAe,EAC3B,KAAM,GAAW,GAAI,UAAS,EAAY,MAAyB,EAEnE,GAAI,GAA4B,CAAA,EAChC,EAAS,QAAQ,CAAC,EAAG,EAAG,KAAM,CAC5B,AAAI,IAAK,GACP,EAAK,GAAK,EAAK,GAAK,IAAM,EAAE,WAEvB,EAAA,GAAK,EAAE,SAAS,CACvB,CAGD,EACD,QAAQ,IAAI,CAAI,EAChB,EAAU,MAAQ,EAEpB"}