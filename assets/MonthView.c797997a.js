import{d as g,r as d,g as C,o as a,c as i,a as e,w as v,h as j,t as h,i as q,F as A,e as x,b as B,j as S,k as U,l as y,n as w,m as D,f as N}from"./index.c079d886.js";const Y=e("h2",null,"\u7B2C\u4E00\u6B65\u8A08\u7B97\u5E74\u9F61",-1),$=e("label",null,"\u8ACB\u9078\u64C7\u60A8\u7684\u5BF6\u8C9D\u5E74\u9F61\u9032\u884C\u6AA2\u6E2C\uFF1A",-1),L=e("br",null,null,-1),R={class:"form-inline"},T=e("br",null,null,-1),z=["onSubmit"],I={key:0},O=["value"],G=e("br",null,null,-1),H={key:1,class:"table table-sm table-borderless"},J=e("h2",null,"\u7B2C\u4E8C\u6B65\u767C\u5C55\u91CC\u7A0B\u6AA2\u6838",-1),K=e("h4",null,"\u5152\u7AE5\u7B26\u5408\u8A72\u9805\u76EE\u63CF\u8FF0\u7684\u73FE\u8C61\u5708\u9078[\u662F]\uFF0C\u82E5\u4E0D\u7B26\u5408\u6216\u6C92\u6709\u8A72\u9805\u76EE\u63CF\u8FF0\u7684\u73FE\u8C61\u5708\u9078[\u5426]\u3002",-1),P=e("h5",null,"\u2605\u8868\u793A\u70BA\u91CD\u8981\u6AA2\u6E2C\u984C\u76EE\uFF0C\u8ACB\u5BE6\u5730\u6E2C\u8A66\uFF0C\u518D\u7D00\u9304\u5152\u7AE5\u53CD\u61C9\u3002",-1),Q=e("h5",null,"\u6709\u4EFB\u4F552\u984C\u7B54\u6848\u662F\u5708\u9078\u5728\u7DB2\u5E95\u6B04\u5167\uFF0C\u6216\u984C\u865F\u524D\u6709\u2605\u4E4B\u4EFB\u4F551\u984C\u7B54\u6848\u662F\u5708\u9078\u5728\u7DB2\u5E95\u6B04\u5167\uFF0C \u6216\u586B\u5BEB\u4EBA\u8A8D\u70BA\u5152\u7AE5\u6709\u5176\u4ED6\u4E0D\u5C0B\u5E38\u7684\u529F\u80FD\u6216\u884C\u70BA\u8868\u73FE\uFF0C\u8ACB\u81F3\u4E0B\u4E00\u9801\u6240\u5217\u4E4B\u91AB\u7642\u9662\u6240\u505A\u9032\u4E00\u6B65\u6AA2\u67E5\u3002",-1),W=e("hr",null,null,-1),X={class:"col-sm-10 d-flex"},Z={style:{width:"25px"}},uu={style:{width:"25px"}},eu={class:"col-sm-2 d-flex justify-content-center"},tu=["id","name","onUpdate:modelValue"],lu=["for"],su=["id","name","onUpdate:modelValue"],ou=["for"],nu=["disabled"],au=U(" \u78BA\u8A8D "),iu={key:0,class:"spinner-border spinner-border-sm"},du=g({__name:"MonthForm",setup(k){const r=d({});fetch("assets/monthRoot.json").then(o=>o.json()).then(o=>{r.value=o});const c=d(""),s=d([]),_=d([]);function b(){_.value=[],fetch(c.value).then(o=>o.json()).then(o=>{s.value=o.questions;for(let t in s.value)s.value[t].title=s.value[t].title.replace(/\d+\.(.+)/,"$1"),s.value[t].answer=!!s.value[t].answer})}const f=d(C().format("YYYY-MM-DD")),p=d("");function M(){console.log(f.value);const t=C().diff(C(f.value))/(1e3*60*60*24);console.log("diffday = "+t);for(const u in r.value)r.value[u].min<=t&&r.value[u].max>=t&&(c.value=u,b());p.value=""+(t/30).toFixed(1)+"\u6708"}const E=d(!1);function V(o){o.preventDefault();const t=new FormData(o.target);let u={};if(t.forEach((n,m,F)=>u[m]=n.toString()),console.log(u),Object.keys(u).length==0){alert("\u8ACB\u8F38\u5165\u8CC7\u6599");return}console.log(s.value.map(n=>n.answer));let l=0;for(const n in s.value){const m=u["q_"+n]=="true",F=s.value[n].answer;console.log([n,m,F]),m==F&&(s.value[n].special?l+=2:l+=1)}alert("\u5371\u96AA\u5EA6"+l),l>=2?y.push("/map?type=0"):l==1&&y.push("/map?type=1")}return(o,t)=>(a(),i(A,null,[Y,e("div",null,[$,L,e("div",R,[v(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=u=>f.value=u)},null,512),[[j,f.value]]),e("button",{type:"button",class:"btn btn-secondary",onClick:M},"\u78BA\u5B9A")]),T,e("label",null,"\u8A66\u7B97\u7D50\u679C\uFF1A"+h(p.value),1)]),e("form",{id:"form",onSubmit:S(V,["prevent"])},[p.value?(a(),i("div",I,[v(e("select",{class:"form-control",id:"selectDistrict",name:"selectDistrict",onChange:b,"onUpdate:modelValue":t[1]||(t[1]=u=>c.value=u),disabled:""},[(a(!0),i(A,null,x(r.value,(u,l,n)=>(a(),i("option",{value:l},h(u.title),9,O))),256))],544),[[q,c.value]])])):B("",!0),G,s.value&&s.value.length>0?(a(),i("table",H,[J,K,P,Q,(a(!0),i(A,null,x(s.value.map((u,l)=>({value:u,index:l,id:`inspectionItem_ + ${l}`})),u=>(a(),i("div",{class:"row",key:u.index},[W,e("div",X,[e("tr",null,[e("td",Z,h(u.index+1+"."),1),e("td",uu,h(u.value.special?"\u2605":""),1),e("td",null,h(u.value.title),1)])]),e("div",eu,[e("tr",null,[e("td",{class:w("slist_radio "+(u.value.answer?"slist_answer":""))},[v(e("input",{type:"radio",id:u.id+"_1",name:"q_"+u.index,value:"true","onUpdate:modelValue":l=>_.value[u.index]=l,required:""},null,8,tu),[[D,_.value[u.index]]]),e("label",{for:u.id+"_1"},"\u662F",8,lu)],2),e("td",{class:w("slist_radio "+(u.value.answer?"":"slist_answer"))},[v(e("input",{type:"radio",id:u.id+"_0",name:"q_"+u.index,value:"false","onUpdate:modelValue":l=>_.value[u.index]=l,required:""},null,8,su),[[D,_.value[u.index]]]),e("label",{for:u.id+"_0"},"\u5426",8,ou)],2)])])]))),128)),e("button",{class:"btn btn-primary",type:"submit",disabled:E.value},[au,E.value?(a(),i("span",iu)):B("",!0)],8,nu)])):B("",!0)],40,z)],64))}}),ru=e("h1",null,"\u5152\u7AE5\u767C\u5C55\u7DDA\u4E0A\u7BE9\u6AA2",-1),_u=g({__name:"MonthView",setup(k){return(r,c)=>(a(),i("main",null,[ru,N(du)]))}});export{_u as default};
