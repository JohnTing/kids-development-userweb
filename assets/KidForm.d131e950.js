import{d as g,r as l,b as f,o as s,c as a,e as t,w as h,v as V,t as _,f as A,g as k,F,h as y,i as M,j,k as E,P as w,l as U}from"./index.021a874d.js";const S=t("label",null,"\u8ACB\u9078\u64C7\u60A8\u7684\u5BF6\u8C9D\u5E74\u9F61\u9032\u884C\u6AA2\u6E2C\uFF1A",-1),q=t("br",null,null,-1),K={class:"form-inline"},N=t("br",null,null,-1),Y={key:0},O=["onSubmit"],I=["value"],L={id:"mytable",class:"table table-striped table-sm"},P=t("thead",null,null,-1),R={class:"star"},T={class:"star"},$={class:"slist_radio"},z=["id","name","onUpdate:modelValue"],G=["for"],H={class:"slist_radio"},J=["id","name","onUpdate:modelValue"],Q=["for"],W=["disabled"],X=j(" \u78BA\u8A8D "),Z={key:0,class:"spinner-border spinner-border-sm"},oe=g({__name:"KidForm",setup(ee){const i=l({});fetch("monthRoot.json").then(o=>o.json()).then(o=>{i.value=o});const d=l(""),r=l([]),c=l([]);function b(){c.value=[],fetch(d.value).then(o=>o.json()).then(o=>{r.value=o.inspectionItems;for(let u in r.value)r.value[u].title=r.value[u].title.replace(/\d+\.(.+)/,"$1")})}const m=l(f().format("YYYY-MM-DD")),C=l("");function D(){console.log(m.value);const u=f().diff(f(m.value))/(1e3*60*60*24);console.log("diffday = "+u);for(const e in i.value)i.value[e].min<=u&&i.value[e].max>=u&&(d.value=e,b());C.value=""+(u/30).toFixed(1)+"\u6708"}const v=l(!1);function x(o){o.preventDefault();const u=new FormData(o.target);let e={};if(u.forEach((n,p,te)=>e[p]=n.toString()),console.log(e),Object.keys(e).length==0){alert("\u8ACB\u8F38\u5165\u8CC7\u6599");return}B(e)}function B(o){v.value=!0;const u=new w.Object("KidFrom");for(const e in o)u.set(e,o[e]);u.save().then(e=>{console.log("KidFrom created",e),U.push("/user")}).catch(e=>console.error("Error while creating KidFrom: ",e))}return(o,u)=>(s(),a(F,null,[t("div",null,[S,q,t("div",K,[h(t("input",{type:"date",class:"form-control","onUpdate:modelValue":u[0]||(u[0]=e=>m.value=e)},null,512),[[V,m.value]]),t("button",{type:"button",class:"btn btn-secondary",onClick:D},"\u78BA\u5B9A")]),N,t("label",null,"\u8A66\u7B97\u7D50\u679C\uFF1A"+_(C.value),1)]),d.value?(s(),a("pre",Y,`    \u5152\u7AE5\u7B26\u5408\u8A72\u9805\u76EE\u63CF\u8FF0\u7684\u73FE\u8C61\u5708\u9078[\u662F]\uFF0C\u82E5\u4E0D\u7B26\u5408\u6216\u6C92\u6709\u8A72\u9805\u76EE\u63CF\u8FF0\u7684\u73FE\u8C61\u5708\u9078[\u5426]\u3002\r
    \u2605\u8868\u793A\u70BA\u91CD\u8981\u6AA2\u6E2C\u984C\u76EE\uFF0C\u8ACB\u5BE6\u5730\u6E2C\u8A66\uFF0C\u518D\u7D00\u9304\u5152\u7AE5\u53CD\u61C9\u3002`)):A("",!0),t("form",{id:"form",onSubmit:M(x,["prevent"])},[h(t("select",{class:"form-control",id:"selectDistrict",name:"selectDistrict",onChange:b,"onUpdate:modelValue":u[1]||(u[1]=e=>d.value=e)},[(s(!0),a(F,null,y(i.value,(e,n,p)=>(s(),a("option",{value:n},_(e.title),9,I))),256))],544),[[k,d.value]]),t("table",L,[P,t("tbody",null,[(s(!0),a(F,null,y(r.value.map((e,n)=>({value:e,index:n,id:`inspectionItem_ + ${n}`})),e=>(s(),a("tr",{key:e.index},[t("th",R,_(e.index+1+"."),1),t("th",T,_(e.value.special?"\u2605":""),1),t("th",null,_(e.value.title),1),t("th",$,[h(t("input",{type:"radio",id:e.id+"_1",name:"q_"+e.index,value:"true","onUpdate:modelValue":n=>c.value[e.index]=n,required:""},null,8,z),[[E,c.value[e.index]]]),t("label",{for:e.id+"_1"},"\u662F",8,G)]),t("th",H,[h(t("input",{type:"radio",id:e.id+"_0",name:"q_"+e.index,value:"false","onUpdate:modelValue":n=>c.value[e.index]=n,required:""},null,8,J),[[E,c.value[e.index]]]),t("label",{for:e.id+"_0"},"\u5426",8,Q)])]))),128))])]),t("button",{class:"btn btn-primary",type:"submit",disabled:v.value},[X,v.value?(s(),a("span",Z)):A("",!0)],8,W)],40,O)],64))}});export{oe as _};
