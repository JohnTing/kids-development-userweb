{"version":3,"file":"UserFrom.da58dd01.js","sources":["../../src/components/UserFrom.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { type Ref, ref } from \"vue\";\r\nimport dayjs from \"dayjs\";\r\nimport router from \"@/router\";\r\n\r\n\r\ntype citysT = Record<string, string[]>;\r\n\r\nconst userTypes = [\"醫療人員\", \"老師\", \"社政人員\", \"家長\", \"其他\"];\r\nconst parentNationalitys = [\r\n  \"本國籍\",\r\n  \"大陸\",\r\n  \"泰國\",\r\n  \"印尼\",\r\n  \"越南\",\r\n  \"柬埔寨\",\r\n  \"緬甸\",\r\n  \"其他\",\r\n];\r\n\r\nconst childGenders = [\"男\", \"女\"];\r\n\r\nconst citys: Ref<citysT> = ref({});\r\nconst city = ref(\"\");\r\nconst district = ref(\"\");\r\n\r\nfetch(\"administrativeArea.json\")\r\n  .then((value) => value.json())\r\n  .then((value) => {\r\n    citys.value = value;\r\n  });\r\n\r\n\r\nconst isLoading = ref(false);\r\n\r\nfunction getFormValues(submitEvent: Event) {\r\n  \r\n  submitEvent.preventDefault();\r\n  const formData = new FormData(submitEvent.target as HTMLFormElement);\r\n\r\n  let data: Record<string, string> = {};\r\n  formData.forEach((v, k, a) => (data[k] = v.toString()));\r\n  console.log(data);\r\n  isLoading.value = true;\r\n  sendFormDate(data);\r\n}\r\nfunction sendFormDate(date: Record<string, string>) {\r\n  /*\r\n  const myNewObject: Parse.Object = new Parse.Object(\"UserFrom\");\r\n\r\n  for (const i in date) {\r\n    myNewObject.set(i, date[i]);\r\n  }\r\n  myNewObject.save()\r\n    .then(result => {\r\n      console.log(\"UserFrom created\", result);\r\n      router.push(\"map\");\r\n    })\r\n    .catch(error => console.error(\"Error while creating UserFrom: \", error));\r\n  */\r\n\r\n  const myHeaders = new Headers();\r\n  myHeaders.append(\"X-Parse-Application-Id\", \"kYUbkvUsiOYbHlfGTekGVCsdoLgHXglAcQbaO57f\");\r\n  myHeaders.append(\"X-Parse-REST-API-Key\", \"HBi7YTskQm6k7AcUFIN3Rp5sH2FMKvHbRyfEyr4Q\");\r\n  myHeaders.append(\"Content-Type\", \"application/json\");\r\n\r\n  const raw = JSON.stringify(date);\r\n\r\n  const requestOptions = {\r\n    method: 'POST',\r\n    headers: myHeaders,\r\n    body: raw\r\n  };\r\n\r\n  fetch(\"https://kds.b4a.io/classes/UserFrom\", requestOptions)\r\n    .then(response => response.text())\r\n    .then(result => {console.log(result); router.push(\"/map\"); })\r\n    .catch(error => console.log('error', error));\r\n\r\n}\r\n</script>\r\n\r\n<template>\r\n  <form id=\"from\" @submit.prevent=\"getFormValues\">\r\n    <div class=\"form-row\">\r\n      <div class=\"col-md-12\">\r\n        填表人姓名：\r\n        <input type=\"text\" class=\"form-control\" name=\"userName\" required />\r\n      </div>\r\n      <div class=\"col-md-12\">\r\n        填表人身分：\r\n        <div class=\"form-check-inline\" v-for=\"(v, i) in userTypes\">\r\n          <input\r\n            class=\"form-check-input\"\r\n            type=\"radio\"\r\n            name=\"userType\"\r\n            :id=\"'userType_' + i\"\r\n            :value=\"v\"\r\n            required\r\n          />\r\n          <label class=\"form-check-label\" :for=\"'userType_' + i\">{{ v }}</label>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-12\">\r\n        家長國籍：\r\n        <div class=\"form-check-inline\" v-for=\"(v, i) in parentNationalitys\">\r\n          <input\r\n            class=\"form-check-input\"\r\n            type=\"radio\"\r\n            name=\"parentNationality\"\r\n            :id=\"'parentNationality_' + i\"\r\n            :value=\"v\"\r\n            required\r\n          />\r\n          <label class=\"form-check-label\" :for=\"'parentNationality_' + i\">{{\r\n            v\r\n          }}</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <br />\r\n    <h3>兒童基本資料</h3>\r\n    <div class=\"form-row\">\r\n      <div class=\"col-md-12\">\r\n        兒童姓名：\r\n        <input type=\"text\" class=\"form-control\" name=\"childName\" required />\r\n        <label>性別：</label>\r\n        <div class=\"form-check-inline\"\r\n          v-for=\"childGender in childGenders\">\r\n          <input\r\n            class=\"form-check-input\"\r\n            type=\"radio\"\r\n            name=\"childGender\"\r\n            :id=\"childGender\"\r\n            :value=\"childGender\" required\r\n          />\r\n          <label class=\"form-check-label\" :for=\"childGender\">{{ childGender }}</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <br />\r\n    <div class=\"form-row\">\r\n      <div class=\"col-md-6\">\r\n        檢核日期：\r\n        <input\r\n          type=\"date\"\r\n          class=\"form-control\"\r\n          id=\"inspectionDate\"\r\n          name=\"inspectionDate\"\r\n          :value=\"dayjs().format('YYYY-MM-DD')\"\r\n          required\r\n        />\r\n      </div>\r\n      <div class=\"col-md-6\">\r\n        出生日期：\r\n        <input\r\n          type=\"date\"\r\n          class=\"form-control\"\r\n          id=\"childBirthday\"\r\n          name=\"childBirthday\"\r\n          :value=\"dayjs().format('YYYY-MM-DD')\"\r\n          required\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-row\">\r\n      <div class=\"col-sm-12 form-inline\">\r\n        戶籍住址：\r\n        <select\r\n          class=\"form-control\"\r\n          id=\"city\"\r\n          name=\"city\"\r\n          v-model=\"city\"\r\n          required\r\n        >\r\n          <option v-for=\"(v, i) in citys\">{{ i }}</option>\r\n        </select>\r\n        <select\r\n          class=\"form-control\"\r\n          id=\"district\"\r\n          name=\"district\"\r\n          v-model=\"district\"\r\n          required\r\n        >\r\n          <option v-for=\"(v, i) in citys[city]\" :key=\"v\">{{ v }}</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-row\">\r\n      <div class=\"col-sm-6\">\r\n        身分證資料：\r\n        <input\r\n          class=\"form-control\"\r\n          name=\"identityCard\"\r\n          required\r\n          pattern=\"[A-Z][01][0-9]{8}\"\r\n        />\r\n      </div>\r\n      <div class=\"col-sm-6\">\r\n        電話：\r\n        <input class=\"form-control\" name=\"phoneNumber\" required />\r\n      </div>\r\n    </div>\r\n\r\n\r\n      <button class=\"btn btn-primary\" type=\"submit\" :disabled=\"isLoading\">\r\n      確認\r\n      <span class=\"spinner-border spinner-border-sm\" v-if=\"isLoading\"></span>\r\n    </button>\r\n\r\n\r\n  </form>\r\n</template>\r\n"],"names":[],"mappings":"inDAQA,KAAM,GAAY,CAAC,2BAAQ,eAAM,2BAAQ,eAAM,cAAI,EAC7C,EAAqB,CACzB,qBACA,eACA,eACA,eACA,eACA,qBACA,eACA,cAAA,EAGI,EAAe,CAAC,SAAK,QAAG,EAExB,EAAqB,EAAI,CAAA,CAAE,EAC3B,EAAO,EAAI,EAAE,EACb,EAAW,EAAI,EAAE,EAEjB,MAAA,yBAAyB,EAC5B,KAAK,AAAC,GAAU,EAAM,MAAM,EAC5B,KAAK,AAAC,GAAU,CACf,EAAM,MAAQ,CAAA,CACf,EAGG,KAAA,GAAY,EAAI,EAAK,EAE3B,WAAuB,EAAoB,CAEzC,EAAY,eAAe,EAC3B,KAAM,GAAW,GAAI,UAAS,EAAY,MAAyB,EAEnE,GAAI,GAA+B,CAAA,EAC1B,EAAA,QAAQ,CAAC,EAAG,EAAG,KAAO,EAAK,GAAK,EAAE,SAAW,CAAA,EACtD,QAAQ,IAAI,CAAI,EAChB,EAAU,MAAQ,GAClB,EAAa,CAAI,CACnB,CACA,WAAsB,EAA8B,CAe5C,KAAA,GAAY,GAAI,SACZ,EAAA,OAAO,yBAA0B,0CAA0C,EAC3E,EAAA,OAAO,uBAAwB,0CAA0C,EACzE,EAAA,OAAO,eAAgB,kBAAkB,EAE7C,KAAA,GAAM,KAAK,UAAU,CAAI,EAQzB,MAAA,sCANiB,CACrB,OAAQ,OACR,QAAS,EACT,KAAM,CAAA,CAGmD,EACxD,KAAK,AAAA,GAAY,EAAS,KAAM,CAAA,EAChC,KAAK,AAAU,GAAA,CAAC,QAAQ,IAAI,CAAM,EAAG,EAAO,KAAK,MAAM,CAAA,CAAI,EAC3D,MAAM,AAAA,GAAS,QAAQ,IAAI,QAAS,CAAK,CAAC,CAE/C"}