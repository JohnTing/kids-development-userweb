import{d as B,r as d,a as C,o as s,c as l,b as t,w as f,v as V,t as h,e as w,F as A,f as E,g as F,h as M,i as U,j as y,k as j,l as S}from"./index.c01e5799.js";const H=t("h2",null,"\u7B2C\u4E00\u6B65\u8A08\u7B97\u5E74\u9F61",-1),O=t("label",null,"\u8ACB\u9078\u64C7\u60A8\u7684\u5BF6\u8C9D\u5E74\u9F61\u9032\u884C\u6AA2\u6E2C\uFF1A",-1),T=t("br",null,null,-1),Y={class:"form-inline"},q=t("br",null,null,-1),N=["onSubmit"],I={key:0},K=t("h2",null,"\u7B2C\u4E8C\u6B65\u9078\u64C7\u8981\u6E2C\u8A66\u7684\u5E74\u9F61",-1),R=["value"],P=t("br",null,null,-1),$={key:1,class:"table table-sm"},L=t("h2",null,"\u7B2C\u4E09\u6B65\u767C\u5C55\u91CC\u7A0B\u6AA2\u6838",-1),Q=t("h4",null,"\u5152\u7AE5\u7B26\u5408\u8A72\u9805\u76EE\u63CF\u8FF0\u7684\u73FE\u8C61\u5708\u9078[\u662F]\uFF0C\u82E5\u4E0D\u7B26\u5408\u6216\u6C92\u6709\u8A72\u9805\u76EE\u63CF\u8FF0\u7684\u73FE\u8C61\u5708\u9078[\u5426]\u3002",-1),X=t("h4",null,"\u2605\u8868\u793A\u70BA\u91CD\u8981\u6AA2\u6E2C\u984C\u76EE\uFF0C\u8ACB\u5BE6\u5730\u6E2C\u8A66\uFF0C\u518D\u7D00\u9304\u5152\u7AE5\u53CD\u61C9\u3002",-1),G={class:"col-sm-10 d-flex"},J={style:{width:"25px"}},z={style:{width:"25px"}},W={class:"col-sm-2 d-flex justify-content-center"},Z={class:"slist_radio"},ee=["id","name","onUpdate:modelValue"],te=["for"],ue={class:"slist_radio"},oe=["id","name","onUpdate:modelValue"],ne=["for"],se=["disabled"],le=U(" \u78BA\u8A8D "),ae={key:0,class:"spinner-border spinner-border-sm"},de=B({__name:"KidForm",setup(x){const i=d({});fetch("monthRoot.json").then(o=>o.json()).then(o=>{i.value=o});const r=d(""),c=d([]),_=d([]);function b(){_.value=[],fetch(r.value).then(o=>o.json()).then(o=>{c.value=o.inspectionItems;for(let u in c.value)c.value[u].title=c.value[u].title.replace(/\d+\.(.+)/,"$1")})}const m=d(C().format("YYYY-MM-DD")),v=d("");function D(){console.log(m.value);const u=C().diff(C(m.value))/(1e3*60*60*24);console.log("diffday = "+u);for(const e in i.value)i.value[e].min<=u&&i.value[e].max>=u&&(r.value=e,b());v.value=""+(u/30).toFixed(1)+"\u6708"}const p=d(!1);function g(o){o.preventDefault();const u=new FormData(o.target);let e={};if(u.forEach((n,a,ce)=>e[a]=n.toString()),console.log(e),Object.keys(e).length==0){alert("\u8ACB\u8F38\u5165\u8CC7\u6599");return}k(e)}function k(o){p.value=!0;const u=new Headers;u.append("X-Parse-Application-Id","kYUbkvUsiOYbHlfGTekGVCsdoLgHXglAcQbaO57f"),u.append("X-Parse-REST-API-Key","HBi7YTskQm6k7AcUFIN3Rp5sH2FMKvHbRyfEyr4Q"),u.append("Content-Type","application/json");const e=JSON.stringify(o);fetch("https://kds.b4a.io/classes/KidFrom",{method:"POST",headers:u,body:e}).then(a=>a.text()).then(a=>{console.log(a),j.push("/user")}).catch(a=>console.log("error",a))}return(o,u)=>(s(),l(A,null,[H,t("div",null,[O,T,t("div",Y,[f(t("input",{type:"date",class:"form-control","onUpdate:modelValue":u[0]||(u[0]=e=>m.value=e)},null,512),[[V,m.value]]),t("button",{type:"button",class:"btn btn-secondary",onClick:D},"\u78BA\u5B9A")]),q,t("label",null,"\u8A66\u7B97\u7D50\u679C\uFF1A"+h(v.value),1)]),t("form",{id:"form",onSubmit:M(g,["prevent"])},[v.value?(s(),l("div",I,[K,f(t("select",{class:"form-control",id:"selectDistrict",name:"selectDistrict",onChange:b,"onUpdate:modelValue":u[1]||(u[1]=e=>r.value=e)},[(s(!0),l(A,null,E(i.value,(e,n,a)=>(s(),l("option",{value:n},h(e.title),9,R))),256))],544),[[w,r.value]])])):F("",!0),P,c.value.length?(s(),l("table",$,[L,Q,X,(s(!0),l(A,null,E(c.value.map((e,n)=>({value:e,index:n,id:`inspectionItem_ + ${n}`})),e=>(s(),l("div",{class:"row",key:e.index},[t("div",G,[t("tr",null,[t("td",J,h(e.index+1+"."),1),t("td",z,h(e.value.special?"\u2605":""),1),t("td",null,h(e.value.title),1)])]),t("div",W,[t("tr",null,[t("td",Z,[f(t("input",{type:"radio",id:e.id+"_1",name:"q_"+e.index,value:"true","onUpdate:modelValue":n=>_.value[e.index]=n,required:""},null,8,ee),[[y,_.value[e.index]]]),t("label",{for:e.id+"_1"},"\u662F",8,te)]),t("td",ue,[f(t("input",{type:"radio",id:e.id+"_0",name:"q_"+e.index,value:"false","onUpdate:modelValue":n=>_.value[e.index]=n,required:""},null,8,oe),[[y,_.value[e.index]]]),t("label",{for:e.id+"_0"},"\u5426",8,ne)])])])]))),128)),t("button",{class:"btn btn-primary",type:"submit",disabled:p.value},[le,p.value?(s(),l("span",ae)):F("",!0)],8,se)])):F("",!0)],40,N)],64))}}),ie=t("h1",null,"\u5152\u7AE5\u767C\u5C55\u7DDA\u4E0A\u7BE9\u6AA2",-1),_e=B({__name:"KidView",setup(x){return(i,r)=>(s(),l("main",null,[ie,S(de)]))}});export{_e as default};
